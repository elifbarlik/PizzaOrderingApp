@page "/"
@page "/pizzas"
@inject Pitzam.Services.PizzaService PizzaService

<h3 class="text-center mb-4">ğŸ• MenÃ¼</h3>

@if (pizzas == null)
{
    <p>YÃ¼kleniyor...</p>
}
else
{
    @* KartlarÄ± Ä±zgara sistemine yerleÅŸtiriyoruz.
      gy-4: Kartlar arasÄ±na dikey boÅŸluk.
      col-xl-3: Ã‡ok bÃ¼yÃ¼k ekranlarda 4 kart yan yana
      col-lg-4: BÃ¼yÃ¼k ekranlarda 3 kart yan yana
      col-md-6: Orta ekranlarda 2 kart yan yana
    *@
    <div class="row gy-4">
        @foreach (var pizza in pizzas)
        {
            <div class="col-xl-3 col-lg-4 col-md-6">
                @* h-100: KartlarÄ±n aynÄ± yÃ¼kseklikte olmasÄ±nÄ± zorlar *@
                <div class="card shadow-sm h-100 pizza-card">
                    <img src="@pizza.ImageUrl" class="card-img-top pizza-image" alt="@pizza.Name" />
                    
                    @* d-flex flex-column: Ä°Ã§eriÄŸi dikeyde esnetir *@
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">@pizza.Name</h5>
                        <p class="card-text text-muted small ingredients-list">
                            @string.Join(", ", pizza.Ingredients)
                        </p>
                        
                        @* mt-auto: FiyatÄ± ve butonlarÄ± kartÄ±n en altÄ±na iter *@
                        <div class="mt-auto">
                            <p class="card-text h5 text-primary mt-2">
                                <b>@pizza.BasePrice TL</b>
                            </p>
                            
                            @* ButonlarÄ± yan yana ekliyoruz *@
                            <div class="btn-group w-100" role="group">
                                <a class="btn btn-outline-primary" href="/pizzas/@pizza.Id">
                                    <i class="bi bi-search"></i> Detay
                                </a>
                                <a class="btn btn-success" href="/pizzas/@pizza.Id">
                                    <i class="bi bi-cart-plus"></i> Sepete Ekle
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
}

@code {
    private List<Pitzam.Models.Pizza>? pizzas;

    protected override async Task OnInitializedAsync()
    {
        pizzas = await PizzaService.GetPizzasAsync();
    }
}